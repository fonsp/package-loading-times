# package-loading-times
Automated script to measure the **precompilation, installation and loading** time of every package, and a tool to estimate **how long a set of packages will take to install**.


# How it works

## Most popular packages and dependencies

In the first script, https://github.com/fonsp/package-loading-times/blob/main/most_downloaded_packages.jl we use the [julialang pkg server statistics](https://discourse.julialang.org/t/announcing-package-download-stats/69073) to find out which packages are the most popular.

For the 1000 most popular packages, we use [RegistryInstances.jl](https://github.com/GunnarFarneback/RegistryInstances.jl) to find dependencies between those packages. 

> The result is a txt file that looks like this: https://julia-loading-times-test.netlify.app/top_packages_sorted_with_deps.txt

## Timing
The second script, https://github.com/fonsp/package-loading-times/blob/main/measure_loading_times.jl loops through the packages and does the timings.

For each package, we set up a temporary environment where we load all the dependencies first. Then, we can measure the installation (i.e. download), precompilation and first load of the single package in isolation.

> The result is a csv file that looks like this: https://julia-loading-times-test.netlify.app/pkg_load_times.csv

# Use in Pluto.jl
This data is used by Pluto to give an estimate for installation time:

![image](https://github.com/fonsp/Pluto.jl/assets/6933510/1327b0bd-144e-4bca-b97c-ced1b2e955ff)

*See the [PR](https://github.com/fonsp/Pluto.jl/pull/2672) for more information*.


# Demo of calculator
The notebook `estimate.jl` can give you an estimate of how long a given set of dependencies will take to install. You need to have the files in your repository for this to work - you can generate them or download them.

https://user-images.githubusercontent.com/6933510/196949551-be77cf07-2539-4ebf-8270-e38b08cff5b5.mov

# Results
I am still working on a nice/automatic way to make the results public.

You can see all results in the [`results_v1` branch](https://github.com/fonsp/package-loading-times/tree/results-v1).


To see more results for different Julia versions and OSes, check out the Artificats generated by the GHA runs: https://github.com/fonsp/package-loading-times/actions/workflows/main.yml


You can get the old results for Julia 1.9 Ubuntu here: (these are used by the Pluto.jl GUI)

https://julia-loading-times-test.netlify.app/pkg_load_times.csv

https://julia-loading-times-test.netlify.app/top_packages_sorted_with_deps.txt

